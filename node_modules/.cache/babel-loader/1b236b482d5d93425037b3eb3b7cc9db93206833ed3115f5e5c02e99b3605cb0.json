{"ast":null,"code":"import{useState}from\"react\";import{ToastContainer,toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserLoginForm=()=>{let navigate=useNavigate();const[loginRequest,setLoginRequest]=useState({emailId:\"\",password:\"\",role:\"\"});const handleUserInput=e=>{setLoginRequest({...loginRequest,[e.target.name]:e.target.value});};const loginAction=e=>{console.log(process.env.REACT_APP_BACKEND);fetch(\"\".concat(process.env.REACT_APP_BACKEND,\"/api/user/login\"),{method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify(loginRequest)}).then(result=>{console.log(\"result\",result);result.json().then(res=>{if(res.success){console.log(\"Got the success response\");if(res.jwtToken!==null){if(res.user.role===\"Admin\"){sessionStorage.setItem(\"active-admin\",JSON.stringify(res.user));sessionStorage.setItem(\"admin-jwtToken\",res.jwtToken);}else if(res.user.role===\"Customer\"){sessionStorage.setItem(\"active-customer\",JSON.stringify(res.user));sessionStorage.setItem(\"customer-jwtToken\",res.jwtToken);}else if(res.user.role===\"Manager\"){sessionStorage.setItem(\"active-manager\",JSON.stringify(res.user));sessionStorage.setItem(\"manager-jwtToken\",res.jwtToken);}}if(res.jwtToken!==null){toast.success(res.responseMessage,{position:\"top-center\",autoClose:1000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});setTimeout(()=>{window.location.href=\"/home\";},1000);// Redirect after 3 seconds\n}else{toast.error(res.responseMessage,{position:\"top-center\",autoClose:1000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});}}else{toast.error(res.responseMessage,{position:\"top-center\",autoClose:1000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});}});}).catch(error=>{console.error(error);toast.error(\"It seems server is down\",{position:\"top-center\",autoClose:1000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});});e.preventDefault();};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 d-flex aligns-items-center justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-card border-color\",style:{width:\"25rem\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header bg-info custom-bg-text mt-2 d-flex justify-content-center align-items-center\",style:{borderRadius:\"1em\",height:\"38px\"},children:/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:\"User Login\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body mt-3\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{class:\"mb-3 text-color\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"role\",class:\"form-label\",children:/*#__PURE__*/_jsx(\"b\",{children:\"User Role\"})}),/*#__PURE__*/_jsxs(\"select\",{onChange:handleUserInput,className:\"form-control\",name:\"role\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"Select Role\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Admin\",children:\" Admin \"}),/*#__PURE__*/_jsx(\"option\",{value:\"Customer\",children:\" Customer \"}),/*#__PURE__*/_jsx(\"option\",{value:\"Manager\",children:\" Manager \"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 text-color\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"emailId\",class:\"form-label\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Email Id\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"emailId\",name:\"emailId\",onChange:handleUserInput,value:loginRequest.emailId})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 text-color\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"password\",className:\"form-label\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Password\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",name:\"password\",onChange:handleUserInput,value:loginRequest.password,autoComplete:\"on\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex aligns-items-center justify-content-center mb-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn bg-info custom-bg-text\",onClick:loginAction,children:\"Login\"}),/*#__PURE__*/_jsx(ToastContainer,{})]})]})})]})})})});};export default UserLoginForm;","map":{"version":3,"names":["useState","ToastContainer","toast","useNavigate","jsx","_jsx","jsxs","_jsxs","UserLoginForm","navigate","loginRequest","setLoginRequest","emailId","password","role","handleUserInput","e","target","name","value","loginAction","console","log","process","env","REACT_APP_BACKEND","fetch","concat","method","headers","Accept","body","JSON","stringify","then","result","json","res","success","jwtToken","user","sessionStorage","setItem","responseMessage","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","setTimeout","window","location","href","error","catch","preventDefault","children","className","style","width","borderRadius","height","class","for","onChange","type","id","autoComplete","onClick"],"sources":["/home/rr/kunal/event_sphere_frontend/src/UserComponent/UserLoginForm.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst UserLoginForm = () => {\n  let navigate = useNavigate();\n\n  const [loginRequest, setLoginRequest] = useState({\n    emailId: \"\",\n    password: \"\",\n    role: \"\",\n  });\n\n  const handleUserInput = (e) => {\n    setLoginRequest({ ...loginRequest, [e.target.name]: e.target.value });\n  };\n\n  const loginAction = (e) => {\n    console.log(process.env.REACT_APP_BACKEND)\n    fetch(`${process.env.REACT_APP_BACKEND}/api/user/login`, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(loginRequest),\n    })\n      .then((result) => {\n        console.log(\"result\", result);\n        result.json().then((res) => {\n          if (res.success) {\n            console.log(\"Got the success response\");\n\n            if (res.jwtToken !== null) {\n              if (res.user.role === \"Admin\") {\n                sessionStorage.setItem(\n                  \"active-admin\",\n                  JSON.stringify(res.user)\n                );\n                sessionStorage.setItem(\"admin-jwtToken\", res.jwtToken);\n              } else if (res.user.role === \"Customer\") {\n                sessionStorage.setItem(\n                  \"active-customer\",\n                  JSON.stringify(res.user)\n                );\n                sessionStorage.setItem(\"customer-jwtToken\", res.jwtToken);\n              } else if (res.user.role === \"Manager\") {\n                sessionStorage.setItem(\n                  \"active-manager\",\n                  JSON.stringify(res.user)\n                );\n                sessionStorage.setItem(\"manager-jwtToken\", res.jwtToken);\n              }\n            }\n\n            if (res.jwtToken !== null) {\n              toast.success(res.responseMessage, {\n                position: \"top-center\",\n                autoClose: 1000,\n                hideProgressBar: false,\n                closeOnClick: true,\n                pauseOnHover: true,\n                draggable: true,\n                progress: undefined,\n              });\n              setTimeout(() => {\n                window.location.href = \"/home\";\n              }, 1000); // Redirect after 3 seconds\n            } else {\n              toast.error(res.responseMessage, {\n                position: \"top-center\",\n                autoClose: 1000,\n                hideProgressBar: false,\n                closeOnClick: true,\n                pauseOnHover: true,\n                draggable: true,\n                progress: undefined,\n              });\n            }\n          } else {\n            toast.error(res.responseMessage, {\n              position: \"top-center\",\n              autoClose: 1000,\n              hideProgressBar: false,\n              closeOnClick: true,\n              pauseOnHover: true,\n              draggable: true,\n              progress: undefined,\n            });\n          }\n        });\n      })\n      .catch((error) => {\n        console.error(error);\n        toast.error(\"It seems server is down\", {\n          position: \"top-center\",\n          autoClose: 1000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        });\n      });\n    e.preventDefault();\n  };\n\n  return (\n    <div>\n      <div className=\"mt-2 d-flex aligns-items-center justify-content-center\">\n        <div className=\"form-card border-color\" style={{ width: \"25rem\" }}>\n          <div className=\"container-fluid\">\n            <div\n              className=\"card-header bg-info custom-bg-text mt-2 d-flex justify-content-center align-items-center\"\n              style={{\n                borderRadius: \"1em\",\n                height: \"38px\",\n              }}\n            >\n              <h4 className=\"card-title\">User Login</h4>\n            </div>\n            <div className=\"card-body mt-3\">\n              <form>\n                <div class=\"mb-3 text-color\">\n                  <label for=\"role\" class=\"form-label\">\n                    <b>User Role</b>\n                  </label>\n                  <select\n                    onChange={handleUserInput}\n                    className=\"form-control\"\n                    name=\"role\"\n                  >\n                    <option value=\"0\">Select Role</option>\n                    <option value=\"Admin\"> Admin </option>\n                    <option value=\"Customer\"> Customer </option>\n                    <option value=\"Manager\"> Manager </option>\n                  </select>\n                </div>\n\n                <div className=\"mb-3 text-color\">\n                  <label for=\"emailId\" class=\"form-label\">\n                    <b>Email Id</b>\n                  </label>\n                  <input\n                    type=\"email\"\n                    className=\"form-control\"\n                    id=\"emailId\"\n                    name=\"emailId\"\n                    onChange={handleUserInput}\n                    value={loginRequest.emailId}\n                  />\n                </div>\n                <div className=\"mb-3 text-color\">\n                  <label for=\"password\" className=\"form-label\">\n                    <b>Password</b>\n                  </label>\n                  <input\n                    type=\"password\"\n                    className=\"form-control\"\n                    id=\"password\"\n                    name=\"password\"\n                    onChange={handleUserInput}\n                    value={loginRequest.password}\n                    autoComplete=\"on\"\n                  />\n                </div>\n                <div className=\"d-flex aligns-items-center justify-content-center mb-2\">\n                  <button\n                    type=\"submit\"\n                    className=\"btn bg-info custom-bg-text\"\n                    onClick={loginAction}\n                  >\n                    Login\n                  </button>\n                  <ToastContainer />\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default UserLoginForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}