{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import axios from\"axios\";import Carousel from\"./Carousel\";import Footer from\"../NavbarComponent/Footer\";import{useNavigate}from\"react-router-dom\";import EventCard from\"../EventComponent/EventCard\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const HomePage=()=>{const navigate=useNavigate();const[categories,setCategories]=useState([]);const[eventName,setEventName]=useState(\"\");const[eventCategoryId,setEventCategoryId]=useState(\"\");const[tempEventName,setTempEventName]=useState(\"\");const[tempEventCategoryId,setTempEventCategoryId]=useState(\"\");const[allEvents,setAllEvents]=useState([]);const retrieveAllCategories=async()=>{const response=await axios.get(\"\".concat(process.env.REACT_APP_BACKEND,\"/api/event/category/fetch/all\"));return response.data;};useEffect(()=>{console.log(\"texting\");console.log(eventName);const getAllEvents=async()=>{const allEvents=await retrieveAllEvents();if(allEvents){setAllEvents(allEvents.events);}};const getSearchedEvents=async()=>{const allEvents=await searchEvents();if(allEvents){setAllEvents(allEvents.events);}};const getAllCategories=async()=>{const resCategory=await retrieveAllCategories();if(resCategory){setCategories(resCategory.categories);}};if(eventCategoryId!==\"\"||eventName!==\"\"){getSearchedEvents();}else{getAllEvents();}getAllCategories();},[eventCategoryId,eventName]);const retrieveAllEvents=async()=>{const response=await axios.get(\"\".concat(process.env.REACT_APP_BACKEND,\"/api/event/fetch/all/active\"));return response.data;};const searchEvents=async()=>{if(eventName!==\"\"){const response=await axios.get(\"\".concat(process.env.REACT_APP_BACKEND,\"/api/event/fetch/name-wise?eventName=\")+eventName);return response.data;}else if(eventCategoryId!==\"\"||eventCategoryId!==\"0\"){const response=await axios.get(\"\".concat(process.env.REACT_APP_BACKEND,\"/api/event/fetch/category-wise?categoryId=\")+eventCategoryId);return response.data;}};const searchEventByName=e=>{e.preventDefault();setEventName(tempEventName);setTempEventName(\"\");setEventCategoryId(\"\");};const searchEventByCategory=e=>{e.preventDefault();setEventCategoryId(tempEventCategoryId);setTempEventCategoryId(\"\");setEventName(\"\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid mb-2\",children:[/*#__PURE__*/_jsx(Carousel,{}),/*#__PURE__*/_jsx(\"h5\",{className:\"text-color-second text-center mt-3\",children:\"Search Events here..!!\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex aligns-items-center justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsxs(\"form\",{class:\"row g-3\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"col-auto\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"city\",name:\"eventName\",onChange:e=>setTempEventName(e.target.value),value:tempEventName,placeholder:\"Search Event here...\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"col-auto\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",class:\"btn bg-info text-color mb-3\",onClick:searchEventByName,children:\"Search\"})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsxs(\"form\",{class:\"row g-3\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"col-auto\",children:/*#__PURE__*/_jsxs(\"select\",{name:\"tempEventCategoryId\",onChange:e=>setTempEventCategoryId(e.target.value),className:\"form-control\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Event Category\"}),categories.map(category=>{return/*#__PURE__*/_jsxs(\"option\",{value:category.id,children:[\" \",category.name,\" \"]});})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"col-auto\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",class:\"btn bg-info text-color mb-3\",onClick:searchEventByCategory,children:\"Search\"})})]})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12 mt-3 mb-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row row-cols-1 row-cols-md-2 g-4\",children:allEvents.map(event=>{return/*#__PURE__*/_jsx(EventCard,{item:event},event.id);})})}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(Footer,{})]});};export default HomePage;","map":{"version":3,"names":["React","useState","useEffect","useParams","axios","Carousel","Footer","useNavigate","EventCard","jsx","_jsx","jsxs","_jsxs","HomePage","navigate","categories","setCategories","eventName","setEventName","eventCategoryId","setEventCategoryId","tempEventName","setTempEventName","tempEventCategoryId","setTempEventCategoryId","allEvents","setAllEvents","retrieveAllCategories","response","get","concat","process","env","REACT_APP_BACKEND","data","console","log","getAllEvents","retrieveAllEvents","events","getSearchedEvents","searchEvents","getAllCategories","resCategory","searchEventByName","e","preventDefault","searchEventByCategory","className","children","class","type","id","name","onChange","target","value","placeholder","onClick","required","map","category","event","item"],"sources":["/home/rr/kunal/event_sphere_frontend/src/PageComponent/HomePage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Carousel from \"./Carousel\";\nimport Footer from \"../NavbarComponent/Footer\";\nimport { useNavigate } from \"react-router-dom\";\nimport EventCard from \"../EventComponent/EventCard\";\n\nconst HomePage = () => {\n  const navigate = useNavigate();\n  const [categories, setCategories] = useState([]);\n\n  const [eventName, setEventName] = useState(\"\");\n  const [eventCategoryId, setEventCategoryId] = useState(\"\");\n  const [tempEventName, setTempEventName] = useState(\"\");\n  const [tempEventCategoryId, setTempEventCategoryId] = useState(\"\");\n  const [allEvents, setAllEvents] = useState([]);\n\n  const retrieveAllCategories = async () => {\n    const response = await axios.get(\n      `${process.env.REACT_APP_BACKEND}/api/event/category/fetch/all`\n    );\n    return response.data;\n  };\n\n  useEffect(() => {\n    console.log(\"texting\");\n    console.log(eventName);\n\n    const getAllEvents = async () => {\n      const allEvents = await retrieveAllEvents();\n      if (allEvents) {\n        setAllEvents(allEvents.events);\n      }\n    };\n\n    const getSearchedEvents = async () => {\n      const allEvents = await searchEvents();\n      if (allEvents) {\n        setAllEvents(allEvents.events);\n      }\n    };\n\n    const getAllCategories = async () => {\n      const resCategory = await retrieveAllCategories();\n      if (resCategory) {\n        setCategories(resCategory.categories);\n      }\n    };\n\n    if (eventCategoryId !== \"\" || eventName !== \"\") {\n      getSearchedEvents();\n    } else {\n      getAllEvents();\n    }\n\n    getAllCategories();\n  }, [eventCategoryId, eventName]);\n\n  const retrieveAllEvents = async () => {\n    const response = await axios.get(\n      `${process.env.REACT_APP_BACKEND}/api/event/fetch/all/active`\n    );\n    return response.data;\n  };\n\n  const searchEvents = async () => {\n    if (eventName !== \"\") {\n      const response = await axios.get(\n        `${process.env.REACT_APP_BACKEND}/api/event/fetch/name-wise?eventName=` + eventName\n      );\n\n      return response.data;\n    } else if (eventCategoryId !== \"\" || eventCategoryId !== \"0\") {\n      const response = await axios.get(\n        `${process.env.REACT_APP_BACKEND}/api/event/fetch/category-wise?categoryId=` +\n          eventCategoryId\n      );\n      return response.data;\n    }\n  };\n\n  const searchEventByName = (e) => {\n    e.preventDefault();\n    setEventName(tempEventName);\n\n    setTempEventName(\"\");\n    setEventCategoryId(\"\");\n  };\n\n  const searchEventByCategory = (e) => {\n    e.preventDefault();\n    setEventCategoryId(tempEventCategoryId);\n\n    setTempEventCategoryId(\"\");\n    setEventName(\"\");\n  };\n\n  return (\n    <div className=\"container-fluid mb-2\">\n      <Carousel />\n      <h5 className=\"text-color-second text-center mt-3\">\n        Search Events here..!!\n      </h5>\n\n      <div className=\"d-flex aligns-items-center justify-content-center\">\n        <div className=\"row\">\n          <div className=\"col-auto\">\n            <div className=\"mt-3\">\n              <form class=\"row g-3\">\n                <div class=\"col-auto\">\n                  <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    id=\"city\"\n                    name=\"eventName\"\n                    onChange={(e) => setTempEventName(e.target.value)}\n                    value={tempEventName}\n                    placeholder=\"Search Event here...\"\n                  />\n                </div>\n\n                <div class=\"col-auto\">\n                  <button\n                    type=\"submit\"\n                    class=\"btn bg-info text-color mb-3\"\n                    onClick={searchEventByName}\n                  >\n                    Search\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n          <div className=\"col\">\n            <div className=\"mt-3\">\n              <form class=\"row g-3\">\n                <div class=\"col-auto\">\n                  <select\n                    name=\"tempEventCategoryId\"\n                    onChange={(e) => setTempEventCategoryId(e.target.value)}\n                    className=\"form-control\"\n                    required\n                  >\n                    <option value=\"\">Select Event Category</option>\n\n                    {categories.map((category) => {\n                      return (\n                        <option value={category.id}> {category.name} </option>\n                      );\n                    })}\n                  </select>\n                </div>\n\n                <div class=\"col-auto\">\n                  <button\n                    type=\"submit\"\n                    class=\"btn bg-info text-color mb-3\"\n                    onClick={searchEventByCategory}\n                  >\n                    Search\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"col-md-12 mt-3 mb-5\">\n        <div className=\"row row-cols-1 row-cols-md-2 g-4\">\n          {allEvents.map((event) => {\n            return <EventCard item={event} key={event.id} />;\n          })}\n        </div>\n      </div>\n      <hr />\n      <Footer />\n    </div>\n  );\n};\n\nexport default HomePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}